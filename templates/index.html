<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AURANA | Крафтовый Шоколад</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v=21"> 
</head>
<body>

    <header class="main-header">
        <div class="header-content">
            <h1 class="logo">AURANA</h1>
            <nav>
                <a href="#assortment">Каталог</a>
                <a href="#philosophy">О нас</a>
                <a href="#delivery">Доставка</a>
                <a href="#order">Заказать</a>
                <a href="{{ url_for('profile') }}">Личный кабинет</a>
            </nav>
        </div>
    </header>

    <main>
        <section id="hero" class="hero-section">
            <div class="hero-text">
                <h2>Искусство создавать эмоции.</h2>
                <p>Крафтовый шоколад с уникальным вкусом.</p>
                <a href="#assortment" class="cta-button">Выбрать шоколад</a>
            </div>
        </section>

        <section id="assortment" class="section">
            <h2>Лимитированная коллекция</h2>
            <div class="products-grid">
                {% for product in products %}
                <div class="product-card" data-id="{{ product.id }}" data-name="{{ product.name }}" data-price="{{ product.price }}">
                    
                    <div class="product-image">
                        <p>ИЗОБРАЖЕНИЕ</p> 
                    </div>

                    <h3 class="product-name">{{ product.name }}</h3>
                    <p class="product-description">Нежный молочный шоколад с уникальными наполнителями.</p>
                    <p class="product-price">{{ product.price | int }} ₽</p>
                    
                    <div class="quantity-control">
                        <button class="qty-minus" data-id="{{ product.id }}">-</button>
                        <span class="qty-display" id="qty-{{ product.id }}">0</span>
                        <button class="qty-plus" data-id="{{ product.id }}">+</button>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>

        <section id="philosophy" class="section dark-section">
            <div class="philosophy-content">
                <h2>Наша Философия</h2>
                <p>Мы верим, что шоколад — это не просто десерт, а произведение искусства...</p>
            </div>
        </section>

        <section id="delivery" class="section">
            <h2>Доставка</h2>
            <div class="delivery-details">
                <p>Осуществляем доставку по всему миру...</p>
            </div>
        </section>

        <section id="order" class="section">
            <h2>Оформление заказа</h2>
            
            <div class="cart-summary" id="cart-summary">
                <h3>Ваша корзина:</h3>
                <div id="cart-items">
                    <p>Корзина пуста. Добавьте товар, чтобы оформить заказ.</p>
                </div>
                <p class="cart-total">Итого: <span id="cart-total-display">0</span> ₽</p>
            </div>

            <div class="order-form-container" id="order-form-container">
                <form id="order-form" action="https://formspree.io/f/xnngvdlb" method="POST"> 
                    
                    <p class="client-code-display">Ваш код клиента: <strong>{{ customer_code }}</strong></p>

                    <label for="name">Ваше Имя:</label>
                    <input type="text" id="name" name="Имя_Клиента" required>
                    
                    <label for="contact">Контакт (Email, Telegram или WhatsApp):</label>
                    <input type="text" id="contact" name="Контакт" placeholder="@telegram / email@example.com" required>

                    <input type="hidden" id="order_details_json" name="Детали_Заказа">
                    <input type="hidden" name="Код_Клиента" value="{{ customer_code }}">

                    <button type="submit" class="submit-button" id="submit-order" disabled>Оформить заказ</button>
                    <p class="form-hint" id="form-hint">Чтобы оформить заказ, добавьте товар в корзину.</p>
                </form>
            </div>
        </section>
        
    </main>

    <footer>
        <p>&copy; 2025 AURANA. Все права защищены.</p>
    </footer>

    <script src="{{ url_for('static', filename='app.js') }}?v=21"></script>

</body>
</html>